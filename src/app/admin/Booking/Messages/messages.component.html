<div class="ml-col-1">
    <booking-navbar [section]="section"></booking-navbar>
    <div class="ml-col-1 ap-chat">
        <div class="ap-chat__people-person ap-chat__people-person--me">
            <figure class="ap-chat__people-person-photo">
                <img [src]="userInfo.avatar?userInfo.avatar:'src\assets\avatar-def.png'" />
            </figure>
            <p class="ap-chat__people-person-name">
                {{userInfo.name}} {{userInfo.lastName}}
            </p>
            <p class="ap-chat__people-person-dato">
                Mis chats
            </p>
        </div>
        <div class="ap-chat__people-person ap-chat__people-person--contacts" (click)="openModal()">
            <p class="ap-chat__people-person-name">
                Enviar Mensajes
            </p>
            <p class="ap-chat__people-person-dato">
                Ver contactos
            </p>
        </div>
        <div class="ap-chat__people">
            <div class="ml-col-1">
                <div 
                    *ngFor="let friend of posts;"
                    (click)="showConversation(friend, friend.iduser, $event)" 
                    class="ap-chat__people-person ap-chat__people-person--friend">
                    <span class="ap-chat__people-person--mask"></span>
                    <figure class="ap-chat__people-person-photo">
                        <img [src]="userInfo.avatar?userInfo.avatar:'src\assets\avatar-def.png'" />
                    </figure>
                    <p class="ap-chat__people-person-name">
                        {{ friend.name }} {{ friend.lastname }}
                    </p>
                    <p class="ap-chat__people-person-dato">
                        {{ (friend?.lastMessage?.length>35)? (friend?.lastMessage | slice:0:35)+'...':(friend?.lastMessage) }}
                    </p>
                </div>
            </div>
        </div>
        <div class="ap-chat__chat">
            <div class="chatm card-style" *ngIf="showChat">
                <h4 class="chatm__datos">
                    {{ userSendMessage.info.name + ' ' + userSendMessage.info.lastname }}
                    <img class="chatm__datos-photo" 
                         src="{{ userSendMessage.info.photo }}" />
                </h4>
                <div class="chatm__chat" id="chat_messages">
                    <div *ngFor="let message of messages"
                         class="chatm__chat-message">
                        <span class="chatm__chat-message-msg"
                              [ngClass]="{'chatm__chat-message-msg-own': IDUSR == message.message.userId, 
                                          'chatm__chat-message-msg-from': IDUSR != message.message.userId}">
                            {{ message.message.message1 }}
                        </span>
                    </div>
                </div>
                <div class="chatm__message">
                    <textarea class="chatm__message-message card-style" [(ngModel)]="messageInput"></textarea>
                    <button 
                        (click)="SentMessage(1)"
                        class="chatm__message-send">
                        Enviar
                    </button>
                </div>
            </div>
            <span class="chatm--selecting center-element-absolute" *ngIf="!showChat">
                Selecciona una conversaci√≥n
            </span>
        </div>
    </div>
</div>